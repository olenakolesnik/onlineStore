{"version":3,"file":"index.js","sources":["../src/js/constants.js","../src/js/products-api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/helpers.js","../src/js/handlers.js","../src/home.js"],"sourcesContent":["// https://dummyjson.com/docs/products - документація бекенду, розділ продукти\n// https://dummyjson.com/products?limit=10&skip=10 - отримати всі продукти з пагінацією\n// https://dummyjson.com/products/1 - отримати один продукт по ID\n// https://dummyjson.com/products/search?q=nail - пошук продукту по ключовому слову\n// https://dummyjson.com/products/category-list - отримати список категорій продуктів\n// https://dummyjson.com/products/category/smartphones - отримати продукти по категорії\n\n\n\nexport const BASE_URL = 'https://dummyjson.com/';\nexport const PRODUCTS_PER_PAGE = 12;\nexport const ENDPOINTS = {\n    categories: 'products/category-list',\n    products: 'products',\n};","import axios from \"axios\";\nimport { BASE_URL, ENDPOINTS, PRODUCTS_PER_PAGE } from \"./constants\";\n// додаємо дефолтно BASE_URL\naxios.defaults.baseURL = BASE_URL;\n// запит за категоріями\nexport async function fetchCategories() {    \n    const { data } = await axios(ENDPOINTS.categories);\n    return data;\n}\nexport async function fetchAllProducts(page) {\n    const skip = (page - 1) * PRODUCTS_PER_PAGE;\n    const options = {\n        params: {\n            limit: PRODUCTS_PER_PAGE,\n            skip,\n    }}\n\n    const { data } = await axios(ENDPOINTS.products, options);\n    // const { data } = await axios(`${ENDPOINTS.products}?limit=${PRODUCTS_PER_PAGE}&skip=${skip}`);\n    return data;\n}\nexport async function fetchProductsByCategory(category, page = 1) {\n    const skip = (page - 1) * PRODUCTS_PER_PAGE;\n  \n    const options = {\n      params: {\n        limit: PRODUCTS_PER_PAGE,\n        skip,\n      },\n    };\n  \n    const { data } = await axios(\n      `${ENDPOINTS.products}/category/${category}`,\n      options\n    );\n  \n    return data;\n  }","export const refs = {\n    categoryList: document.querySelector('ul.categories'),\n    productsList: document.querySelector('.products'),\n    loadMoreBtn: document.querySelector('.load-more-btn'),\n    notFound: document.querySelector('.not-found'),\n}","import { refs } from \"./refs\";\n\nexport function renderCategories(data) {\n    const markup = data.map((category) => `\n<li class=\"categories__item\">\n   <button class=\"categories__btn\" type=\"button\">${category}</button>\n </li>`).join('');\n    refs.categoryList.innerHTML = markup;\n}\n\nexport function renderProducts(data) {\n    // refs.productsList.innerHTML = '';\n    const markup = data.map(({id, thumbnail, title, brand, category, price}) => `\n       <li class=\"products__item\" data-id=\"${id}\">\n    <img class=\"products__image\" src=\"${thumbnail}\" alt=\"${title}\"/>\n    <p class=\"products__title\">${title}</p>\n    <p class=\"products__brand\"><span class=\"products__brand--bold\">Brand: ${brand}</span></p>\n    <p class=\"products__category\">Category: ${category}</p>\n    <p class=\"products__price\">Price: ${price}$</p>\n </li>`).join('');\n    refs.productsList.insertAdjacentHTML('beforeend', markup);\n}\nexport function clearProductsList() {\n    refs.productsList.innerHTML = '';\n}\nexport function showLoadMoreBtn() {\n   refs.loadMoreBtn.classList.remove('is-hidden');\n}\nexport function hideLoadMoreBtn() {\n    refs.loadMoreBtn.classList.add('is-hidden');\n}","export function activeFirstBtn() {\n    const firstBtn = document.querySelector('.categories__btn');\n    if (firstBtn) {\n        firstBtn.classList.add('categories__btn--active');\n    }\n}","import iziToast from \"izitoast\";\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { fetchAllProducts, fetchCategories, fetchProductsByCategory } from \"./products-api\";\nimport { hideLoadMoreBtn, renderCategories, renderProducts, showLoadMoreBtn } from \"./render-function\";\nimport { activeFirstBtn } from \"./helpers\";\nimport { PRODUCTS_PER_PAGE } from \"./constants\";\nimport { refs } from \"./refs\"\n\nlet currentPage = 1;\nlet currentCategory = 'ALL';\n\nexport async function getCategories() {\n     try {\n         const data = await fetchCategories();\n         renderCategories(['All', ...data]);\n         activeFirstBtn();\n     } catch (error) {\n       console.log(error);\n         iziToast.error({ message: 'Error!' });\n     }\n}\nexport async function getAllProducts() {\n    try {\n        \n        const data = await fetchAllProducts(currentPage);\n        refs.productsList.innerHTML = '';\n        renderProducts(data.products); \n        if (data.total > PRODUCTS_PER_PAGE) {\n            showLoadMoreBtn();\n        } else {\n            hideLoadMoreBtn();\n        }\n    } catch (error) {\n        console.log(error);\n        iziToast.error({ message: 'Error!' });  \n    }\n}\nexport async function onLoadMoreClick() {\n    try {\n    currentPage += 1;\n        let data;\n        if (currentCategory.toUpperCase() === 'ALL') {\n            data = await fetchAllProducts(currentPage);\n          } else {\n            data = await fetchProductsByCategory(currentCategory, currentPage);\n          }\n      \n          renderProducts(data.products);\n      \n          if (currentPage * PRODUCTS_PER_PAGE >= data.total) {\n            hideLoadMoreBtn();\n          }\n        } catch (error) {\n          iziToast.error({ message: 'Error!' });\n        }\n      }\nexport function setActiveCategory(activeBtn) {\n    document\n      .querySelectorAll('.categories__btn')\n      .forEach(btn =>\n        btn.classList.remove('categories__btn--active')\n      );\n  \n    activeBtn.classList.add('categories__btn--active');\n  }\n\n export async function onCategoryClick(e) {\n  const btn = e.target.closest('.categories__btn');\n  if (!btn) return;\n\n  const category = btn.textContent.trim();\n\n  currentCategory = category.toUpperCase();\n  currentPage = 1;\n\n     setActiveCategory(btn);\n     hideLoadMoreBtn();\n\n  refs.notFound.classList.remove('not-found--visible');\n\n  let data;\n\n  if (category.toUpperCase() === 'ALL') {\n      data = await fetchAllProducts(currentPage);\n      showLoadMoreBtn();\n      \n  } else {\n    data = await fetchProductsByCategory(category, currentPage);\n      hideLoadMoreBtn();\n  }\n\n  if (!data.products.length) {\n    refs.notFound.classList.add('not-found--visible');\n      refs.productsList.innerHTML = '';\n    return;\n  }\n  refs.productsList.innerHTML = '';\n  renderProducts(data.products);\n}\n","import { getAllProducts, getCategories, onCategoryClick, onLoadMoreClick } from \"./js/handlers\";\nimport { refs } from \"./js/refs\";\n\n//Логіка сторінки Home\ngetCategories();\ngetAllProducts();\nrefs.loadMoreBtn.addEventListener('click', onLoadMoreClick);\nrefs.categoryList.addEventListener('click', onCategoryClick);"],"names":["BASE_URL","PRODUCTS_PER_PAGE","ENDPOINTS","axios","fetchCategories","data","fetchAllProducts","page","skip","options","fetchProductsByCategory","category","refs","renderCategories","markup","renderProducts","id","thumbnail","title","brand","price","showLoadMoreBtn","hideLoadMoreBtn","activeFirstBtn","firstBtn","currentPage","currentCategory","getCategories","error","iziToast","getAllProducts","onLoadMoreClick","setActiveCategory","activeBtn","btn","onCategoryClick","e"],"mappings":"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"}