{"version":3,"file":"cart.js","sources":["../src/cart.js"],"sourcesContent":["//–õ–æ–≥—ñ–∫–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∏ Cart\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { renderProductsCartlist } from \"./js/render-function\";\nimport { fetchProductById } from \"./js/products-api\";\nimport { refs } from \"./js/refs\";\nimport { getCart, updateCartCount, updateWishlistCount } from \"./js/storage\";\nimport { onProductClick } from \"./js/handlers\";\nimport { hideLoader, showLoader } from \"./js/helpers\";\n\nasync function loadCartlistProducts() {\n  \n  const cartlistIds = getCart();\n\n  if (!cartlistIds.length) {\n      refs.productsList.innerHTML = '<p>Your wishlist is empty</p>';\n      return;\n  }\n  showLoader();\n  try {\n      const products = await Promise.all(\n          cartlistIds.map(id => fetchProductById(id))\n      );\n      const validProducts = products.filter(Boolean);\n\n      refs.productsList.innerHTML = '';\n      \n    renderProductsCartlist(validProducts);\n    updateCartSummary(products);\n  } catch (error) {\n      console.error('Error loading wishlist products:', error);\n  } finally {\n    hideLoader();\n  }\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  updateCartCount();\n  updateWishlistCount();\n  loadCartlistProducts();\n\n  if (refs.productsList) {\n    refs.productsList.addEventListener('click', onProductClick);\n  }\n \n});\n\nfunction updateCartSummary(products) {\n  const countEl = document.querySelector('[data-count]');\n  const totalEl = document.querySelector('[data-price]');\n\n  if (!countEl || !totalEl) return;\n\n  const totalCount = products.length;\n\n  const totalPrice = products.reduce((sum, product) => {\n    return sum + product.price;\n  }, 0);\n\n  countEl.textContent = totalCount;\n  totalEl.textContent = `$${totalPrice.toFixed(2)}`;\n}\nconst buyBtn = document.querySelector('.cart-summary__btn');\n\nif (buyBtn) {\n  buyBtn.addEventListener('click', () => {\n    const cart = getCart();\n\n    if (!cart.length) {\n      iziToast.warning({\n        message: \"Your cart is empty!\",\n        position: \"topRight\",\n      });\n      return;\n    }\n\n    // ‚úÖ –ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ —É—Å–ø—ñ—à–Ω—É –ø–æ–∫—É–ø–∫—É\n    iziToast.success({\n      title: \"Success\",\n      message: \"Products purchased successfully!\",\n      position: \"topRight\",\n      timeout: 3000,\n    });\n\n    // üßπ –û—á–∏—â–∞—î–º–æ –∫–æ—à–∏–∫\n    localStorage.removeItem('cart');\n\n    // üîÑ –û–Ω–æ–≤–ª—é—î–º–æ UI\n    updateCartCount();\n    loadCartlistProducts(); // —Ç–≤–æ—è —Ñ—É–Ω–∫—Ü—ñ—è –ø–µ—Ä–µ—Ä–µ–Ω–¥–µ—Ä—É cart\n  \n    const countEl = document.querySelector('[data-count]');\n    const totalEl = document.querySelector('[data-price]');\n\n    if (countEl) countEl.textContent = '0';\n    if (totalEl) totalEl.textContent = '$0.00';\n  });\n}"],"names":["loadCartlistProducts","cartlistIds","getCart","refs","showLoader","products","id","fetchProductById","validProducts","renderProductsCartlist","updateCartSummary","error","hideLoader","updateCartCount","updateWishlistCount","onProductClick","countEl","totalEl","totalCount","totalPrice","sum","product","buyBtn","iziToast"],"mappings":"gJAUA,eAAeA,GAAuB,CAEpC,MAAMC,EAAcC,IAEpB,GAAI,CAACD,EAAY,OAAQ,CACrBE,EAAK,aAAa,UAAY,gCAC9B,MACH,CACDC,IACA,GAAI,CACA,MAAMC,EAAW,MAAM,QAAQ,IAC3BJ,EAAY,IAAIK,GAAMC,EAAiBD,CAAE,CAAC,CACpD,EACYE,EAAgBH,EAAS,OAAO,OAAO,EAE7CF,EAAK,aAAa,UAAY,GAEhCM,EAAuBD,CAAa,EACpCE,EAAkBL,CAAQ,CAC3B,OAAQM,EAAO,CACZ,QAAQ,MAAM,mCAAoCA,CAAK,CAC7D,QAAY,CACRC,GACD,CACH,CAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDC,IACAC,IACAd,IAEIG,EAAK,cACPA,EAAK,aAAa,iBAAiB,QAASY,CAAc,CAG9D,CAAC,EAED,SAASL,EAAkBL,EAAU,CACnC,MAAMW,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,SAAS,cAAc,cAAc,EAErD,GAAI,CAACD,GAAW,CAACC,EAAS,OAE1B,MAAMC,EAAab,EAAS,OAEtBc,EAAad,EAAS,OAAO,CAACe,EAAKC,IAChCD,EAAMC,EAAQ,MACpB,CAAC,EAEJL,EAAQ,YAAcE,EACtBD,EAAQ,YAAc,IAAIE,EAAW,QAAQ,CAAC,CAAC,EACjD,CACA,MAAMG,EAAS,SAAS,cAAc,oBAAoB,EAEtDA,GACFA,EAAO,iBAAiB,QAAS,IAAM,CAGrC,GAAI,CAFSpB,IAEH,OAAQ,CAChBqB,EAAS,QAAQ,CACf,QAAS,sBACT,SAAU,UAClB,CAAO,EACD,MACD,CAGDA,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,mCACT,SAAU,WACV,QAAS,GACf,CAAK,EAGD,aAAa,WAAW,MAAM,EAG9BV,IACAb,IAEA,MAAMgB,EAAU,SAAS,cAAc,cAAc,EAC/CC,EAAU,SAAS,cAAc,cAAc,EAEjDD,IAASA,EAAQ,YAAc,KAC/BC,IAASA,EAAQ,YAAc,QACvC,CAAG"}